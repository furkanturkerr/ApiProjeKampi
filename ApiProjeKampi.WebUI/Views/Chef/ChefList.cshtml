@model List<ApiProjeKampi.WebUI.Dtos.ChefDtos.ResultChefDto>

@{
    Layout = "~/Views/AdminLayout/Index.cshtml";
    int count = 0;
    string[] avatarColors = { "bg-primary", "bg-success", "bg-warning", "bg-danger", "bg-info" };
}

<section class="section">
    <div class="section-header">
        <h1>Şefler</h1>
        <div class="section-header-breadcrumb">
            <div class="breadcrumb-item active"><a href="#">Dashboard</a></div>
            <div class="breadcrumb-item">Şefler</div>
        </div>
    </div>

    <div class="section-body">

        <div class="row mb-3">
            <div class="col-12 d-flex justify-content-between align-items-center">
                <p class="text-muted mb-0">Toplam <strong>@Model.Count()</strong> şef</p>
                <a href="~/Chef/CreateChef/" class="btn btn-primary btn-sm">
                    <i class="fas fa-plus mr-1"></i> Yeni Şef Ekle
                </a>
            </div>
        </div>

        <div class="row">
            @foreach (var item in Model)
            {
                string color = avatarColors[count % avatarColors.Length];
                string initial = !string.IsNullOrEmpty(item.Name) ? item.Name[0].ToString().ToUpper() : "?";
                count++;

                <div class="col-lg-3 col-md-6 col-12 mb-4">
                    <div class="card h-100 text-center" style="border-top: 4px solid #6777ef;">
                        <div class="card-body pt-4">

                            <!-- Fotoğraf veya Avatar -->
                            @if (!string.IsNullOrEmpty(item.ImageUrl))
                            {
                                <img src="@item.ImageUrl"
                                     alt="@item.Name @item.Surname"
                                     class="mx-auto mb-3"
                                     style="width:80px; height:80px; border-radius:50%; object-fit:cover; border: 3px solid #6777ef; display:block;"
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                                <span class="@color mx-auto mb-3"
                                      style="width:80px; height:80px; border-radius:50%; display:none; align-items:center; justify-content:center; font-size:1.8rem; font-weight:700; color:#fff;">
                                    @initial
                                </span>
                            }
                            else
                            {
                                <span class="@color mx-auto mb-3"
                                      style="width:80px; height:80px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:1.8rem; font-weight:700; color:#fff;">
                                    @initial
                                </span>
                            }

                            <!-- İsim -->
                            <h5 class="font-weight-bold mb-1">@item.Name @item.Surname</h5>

                            <!-- Unvan -->
                            <span class="badge badge-primary mb-3">@item.Title</span>

                            <!-- Açıklama -->
                            <p class="text-muted" style="font-size:0.85rem; line-height:1.7;
                                display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden;">
                                @item.Description
                            </p>

                        </div>

                        <div class="card-footer bg-transparent d-flex justify-content-center" style="gap:8px;">
                            <a href="~/Chef/UpdateChef/@item.ChefId" class="btn btn-warning btn-sm">
                                <i class="fas fa-edit mr-1"></i> Düzenle
                            </a>
                            <a href="~/Chef/DeleteChef/@item.ChefId"
                               class="btn btn-danger btn-sm"
                               onclick="return confirm('@item.Name @item.Surname şefini silmek istediğinize emin misiniz?')">
                                <i class="fas fa-trash mr-1"></i> Sil
                            </a>
                        </div>
                    </div>
                </div>
            }

            @if (Model.Count() == 0)
            {
                <div class="col-12">
                    <div class="card text-center py-5">
                        <div class="card-body">
                            <i class="fas fa-user-slash fa-4x text-muted mb-3"></i>
                            <h4>Henüz şef eklenmemiş</h4>
                            <p class="text-muted">Ekibinizi buradan yönetin.</p>
                            <a href="~/Chef/CreateChef/" class="btn btn-primary mt-2">
                                <i class="fas fa-plus mr-1"></i> İlk Şefi Ekle
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>

    </div>
</section>